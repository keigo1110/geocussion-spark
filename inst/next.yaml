version: "1.1"
last_updated: "2025-07-01"
subject: "demo_collision_detection.py Issue Backlog"

overview:
  summary: |
    Consolidated backlog of defects / improvement items for Geocussion-SP demo.
    Added new entry DEMO-010 addressing missed collision on brief taps (percussion-like interactions).

issues:
  - id: DEMO-010-TAP-MISSED
    title: "Brief Tap Gestures Not Registered as Collisions"
    root_cause: |
      Current collision pipeline requires the hand-sphere to overlap at least two consecutive frames.
      For fast taps (≈50-100 ms contact) the sequence often becomes:
        1. Frame-n: hand above mesh, distance > radius
        2. Frame-n+1: hand penetrates mesh but mesh update or BVH query still uses old terrain (due to
           `mesh_update_interval` & `max_mesh_skip_frames`) or `search_result.distances` > 2×radius filter
        3. Frame-n+2: hand already left contact zone
      Additionally, sphere radius (default 5 cm) may be too small relative to single-frame noise, and
      temporal filtering on hand position can lag behind rapid movement, causing the sphere to "jump over"
      narrow peaks.
    impact: "Percussive interactions feel unresponsive; user must linger to trigger sound."
    proposed_action: |
      • Insert predictive/lag compensation: extrapolate hand trajectory and test both current & previous
        positions within collision stage (mini motion buffer of last 3 frames).
      • Reduce mesh update latency when no hands present by forcing update if vertical velocity > threshold.
      • Parameter tweak: allow single-frame collision by removing `search_result.distances > radius*2` early
        exit and lowering `collision_tolerance`.
      • Adaptive sphere radius: expand radius for high-speed hands (based on |velocity|) to account for
        motion blur between frames.
      • Add unit test in `tests/collision_test.py` simulating 90 ms tap with synthetic point cloud.
